<script type="text/discourse-plugin" version="0.8">
   api.modifyClass('component:discourse-topic', {
     didInsertElement: function() {
       this._super();
       this.set("dockAt", -100); // that's my secret cap, I'm always docked
     }
  });
</script>

<script>
  $(document).ready(function() {
    var logo = document.getElementById("site-logo");

    function loaded() {
      var logoHeight =
        document.getElementById("sidebar-logo").offsetHeight + 20;

      document.querySelector("div.custom-tracking-nav").style.maxHeight =
        "calc(100vh - " + logoHeight + "px)";
    }

    if (logo.complete) {
      loaded();
    } else {
      logo.addEventListener("load", loaded);
      logo.addEventListener("error", function() {
        console.log("logo error");
      });
    }
  });
</script>

<script type="text/discourse-plugin" version="0.8">
     api.modifyClass('component:composer-body', {

  movePanels(size) {
    $("#main-outlet").css("padding-bottom", size ? size : "");

    // signal the progress bar it should move!
    this.appEvents.trigger("composer:resized");

    // shorten sidebar based on composer + logo height

    var logoHeight =
      document.getElementById("sidebar-logo").offsetHeight + 20;
    var composerHeight = document.getElementById("reply-control").offsetHeight;

    document.querySelector("div.custom-tracking-nav").style.maxHeight =
      "calc(100vh - " + (composerHeight + logoHeight) + "px)";
  },
    });
</script>
